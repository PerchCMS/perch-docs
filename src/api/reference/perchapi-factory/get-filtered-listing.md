---
title: get_filtered_listing()
nav_groups:
  - primary
nav_sort: 8
---

Get a filtered list of items.

## Parameters

```php
$Factory->get_filtered_listing($opts, $where_callback, $pre_template_callback);
```

| Type     | Description                     | Default |
| -------- | ------------------------------- | ------- |
| Array    | Options array, see table below  |         |
| Function | See where callback below        | `null`  |
| Function | See pre-template callback below | `null`  |

## Option array

| Option | Value |
| ------ | ----- |
{{> rows_custom_vars }}
{{> rows_pagination_vars }}

### Possible values for match

{{> table_values_for_match }}

## Where callback

A function that returns a `PerchQuery` object. The query is merged with the database query generated by the `get_filtered_listing()` method.

```php
$where_callback = function(PerchQuery $Query, $opts) {
  return $Query;
};
```

| Type   | Description                                            |
| ------ | ------------------------------------------------------ |
| Object | PerchQuery object                                      |
| Array  | The options array passed from `get_filtered_listing()` |

## Pre-template callback

A function to apply to the returned rows before entering the templating phase.

```php
$pre_template_callback = function($rows, $opts) {
  return $rows;
};
```

| Type  | Description                                            |
| ----- | ------------------------------------------------------ |
| Array | An array of the returned rows                          |
| Array | The options array passed from `get_filtered_listing()` |



## Usage


```php
$API = new PerchAPI(1.0, 'company_app');
$Articles = new CompanyApp_Articles($API);

$Articles->get_filtered_listing([
  'template' => $template,
  'filter' => 'status',
  'match' => 'eq',
  'value' => 'published',
]);
```